<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>ConfigNodes | Kopernicus Wiki</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="ConfigNodes" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="For all your Kopernicus Syntax Needs" />
<meta property="og:description" content="For all your Kopernicus Syntax Needs" />
<link rel="canonical" href="http://localhost:4000/main/ConfigNodes.html" />
<meta property="og:url" content="http://localhost:4000/main/ConfigNodes.html" />
<meta property="og:site_name" content="Kopernicus Wiki" />
<script type="application/ld+json">
{"url":"http://localhost:4000/main/ConfigNodes.html","headline":"ConfigNodes","description":"For all your Kopernicus Syntax Needs","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Kopernicus Wiki" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Kopernicus Wiki</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/main/ConfigNodes.html">ConfigNodes</a><a class="page-link" href="/about/">About</a><a class="page-link" href="/">Kopernicus Wiki</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <p>A quick summary of ConfigNodes</p>

<h1 id="what-is-a-confignode">What is a ConfigNode?</h1>
<p>ConfigNodes are a data storage / settings format that is used by KSP. They are most commonly used in <code class="highlighter-rouge">.cfg</code> files, but you can find them inside of <code class="highlighter-rouge">.craft</code> and <code class="highlighter-rouge">.sfs</code> files too.
Whenever you want to modify anything in KSP, you will have to deal with ConfigNodes.</p>

<p>A Config Node consists of three parts:</p>

<ul>
  <li>header</li>
  <li>values</li>
  <li>subnodes</li>
</ul>

<p>Only the header is required, the other parts are optional, which means that you can create a ConfigNode which is empty.</p>

<h2 id="header">Header</h2>

<p>You declare a ConfigNode by writing down a name, followed by a pair of curly braces. So, if we would want to create a node called <code class="highlighter-rouge">Kopernicus</code>, you would write it like this:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{

}
</code></pre></div></div>

<p>It is <strong>required</strong> to pay attention to the indentation of the braces, since every opened brace will need to be closed again. Also, if your brace layout is incorrect, it might happen that a node becomes a subnode of another node, and the mod that is parsing them doesn’t find the node.</p>

<h2 id="values">Values</h2>

<p>If you want to add values to your ConfigNode, you need a key and a value. The key is most likely predefined by the mod you are trying to configure, the value is something you need to choose.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    name = My cool system
}
</code></pre></div></div>

<p>Make sure you use a fixed indentation level (4 spaces in this example), so your config stays clean and readable. Also make sure that your editor doesn’t mix tabs and spaces, since tabs can have a dynamic width. A config that looks good to you might look totally horrible to a person that wants to read it.
The best way would be to use only tabs (so no spaces at all!), or to have your editor convert all tabs into spaces automatically.</p>

<h2 id="subnodes">Subnodes</h2>

<p>Since adding all values into the same ConfigNode could get messy at some point, mods can structure them into subnodes. This means, that every node can contain an unlimited amount of other nodes. The “main” node, i.e. the node in the <code class="highlighter-rouge">.cfg</code> file that isn’t enclosed by another one, is then called the <strong>root</strong> or the <strong>root-node</strong></p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    name = My cool system
    Body
    {
        name = Kerbin
        Properties
        {
            description = That blue ball around the Sun
        }
    }
}
</code></pre></div></div>

<p>In this example, the node <code class="highlighter-rouge">Kopernicus</code> is the root node, and <code class="highlighter-rouge">Body</code> and <code class="highlighter-rouge">Properties</code> are subnodes of their respective parent.</p>

<h2 id="comments">Comments</h2>

<p>To structure your config file even more you can and should make use of comments: KSP will ignore everything that is behind two forward slashes while parsing the file. You can use this to explain certain parts of the file and what they do, or leave reminders to yourself.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    // Naming the system
    name = My cool system
    
    // Creating my first body
    Body
    {
        // I have heard this name before...
        name = Kerbin
        
        // Access the properties of the body
        Properties
        {
            // Describing Kerbin
            description = That blue ball around the Sun
        }
    }
}
</code></pre></div></div>

<h2 id="tips-and-tricks">Tips and Tricks</h2>

<p>ConfigNodes don’t care about whether a key already exists, they will happily accept two occurences of a key or a node name in the same parent node. However, how these values get handled depends on the mod you are modifying. Some mods will use the last one, others the first one.
Unless it is explicitly supported to have more than one value / node with the same name, you should always avoid them.</p>

<p>To make sure that you are correctly opening and closing your ConfigNodes, you can use this simple trick: Simply add the name of the node behind the closing brace as a comment:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    // Naming the system
    name = My cool system
		
    // Creating my first body
    Body
    {
        // I have heard this name before...
        name = Kerbin
        
        // Access the properties of the body
        Properties
        {
            // Describing Kerbin
            description = That blue ball around the Sun
        
        } // Properties
    
    } // Body

} // Kopernicus
</code></pre></div></div>

<p>That way you can always tell where you actually added the node.</p>

<h1 id="modulemanager">ModuleManager</h1>
<p>One of the biggest problems of config nodes is, that they don’t allow you to easily modify an already existing config. The only way to do this in stock KSP would be to overwrite the file, which would make it very hard to:</p>
<ul>
  <li>Revert the change</li>
  <li>Mix multiple mods that attempt to change the file</li>
</ul>

<p>A mod that fixes this problem for us is ModuleManager: It allows you to write your configs as patches that are later parsed and applied to the configurations in memory, i.e. while the game is loaded. The files on your harddrive don’t get modified. Since ModuleManager has lots of advanced features that you probably will never need, this tutorial will only cover the most basic ones:</p>
<ul>
  <li>Editing</li>
  <li>Copying</li>
  <li>Deleting</li>
  <li>Conditions</li>
</ul>

<h2 id="editing">Editing</h2>
<p>Editing is probably the most important functionality that ModuleManager provides. It works by prefixing a node or a value with <code class="highlighter-rouge">@</code>. This indicates, that MM should search for a node (or value) with the specified name, and then apply the contained changes to it. If you are editing a node, their contents are merged (i.e. values get added), but when you edit a value, it’s content is overwritten.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Kopernicus
{
    name = My name!
}
</code></pre></div></div>
<p>This config would edit the first node called <code class="highlighter-rouge">Kopernicus</code> that it could find, and then add the value <code class="highlighter-rouge">name = My name!</code> to it. That means, if you would apply it to this node:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    name = Banana
}
</code></pre></div></div>
<p>the result would be:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    name = Banana
    name = My name!
}
</code></pre></div></div>
<p>You see that it has added a second instance of the <code class="highlighter-rouge">name</code> value.</p>

<p>Now, if you wanted to edit the name value that already exists, you would prefix the name with <code class="highlighter-rouge">@</code>. Pay attention that you keep the <code class="highlighter-rouge">@</code> prefix on the parent node! Without that, MM would not realize that the whole config is supposed to be a patch, and just search for something to edit in the node itself.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@Kopernicus
{
    @name = My name!
}
</code></pre></div></div>

<p>However, the <code class="highlighter-rouge">@</code> prefix only works if the name that is specified exists as a value or node. If the <code class="highlighter-rouge">name</code> value wouldn’t exist in the original node that is being edited, MM would just ignore it. If you need to place a value somewhere, but you don’t know whether it already exists or not, you can use the <code class="highlighter-rouge">%</code> prefix, which means “edit-or-create”.</p>

<h2 id="copying">Copying</h2>
<p>When you have understood editing, copying is fairly easy. Using the <code class="highlighter-rouge">+</code> prefix, you can create a copy of a node (and only a node!) in the same place where MM found the original one. The body of the node is then parsed by MM as if you would edit the node, so you can change properties like names or ID’s.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    Body
    {
        name = Banana
        works = False
    }
}
@Kopernicus
{
    +Body
    {
        @name = Nabana
    }
}
</code></pre></div></div>
<p>This config would produce this result:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    Body
    {
        name = Banana
        works = False
    }
    Body
    {
        name = Nabana
        works = False
    }
}
</code></pre></div></div>

<h2 id="deleting">Deleting</h2>
<p>Sometimes you have to get rid of a node or a value entirely. You can do this, by using the <code class="highlighter-rouge">!</code> prefix. You still need to define a correct node / value though! This means that this: <code class="highlighter-rouge">!Banana</code> would be invalid. You have to use <code class="highlighter-rouge">!Banana { }</code> to delete a node and <code class="highlighter-rouge">!banana = DEL</code> to delete a value. Note that the value of <code class="highlighter-rouge">!banana</code> doesn’t matter, but it has to be there.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
    Body
    {
        name = Banana
    }
}
@Kopernicus
{
    !Body { }
}
</code></pre></div></div>
<p>would result in</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Kopernicus
{
}
</code></pre></div></div>

<h2 id="conditions">Conditions</h2>
<p>All configs that were previously shown would apply themselves to the first node they can find that matches their name. This is undesired in most cases, since you want to be able to finetune the config of a specific body or part etc. ModuleManager can, instead of selecting the first matching one, select configs based on their values. To do this, you have to add <code class="highlighter-rouge">:HAS[#name[value]]</code> to the name of the node. <code class="highlighter-rouge">name</code> is the key of the value you want to select, and <code class="highlighter-rouge">value</code> it’s value. If the value doesn’t matter to you, you can use a wildcard, that will match everything: <code class="highlighter-rouge">:HAS[#name[*]]</code>. You can also negate the selection, <code class="highlighter-rouge">:HAS[~name[value]]</code> will select a config that doesn’t have a property with the specified name.</p>

<p><strong>TODO: :NEEDS, :FOR, :AFTER</strong></p>


      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Kopernicus Wiki</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Kopernicus Wiki</li><li><a class="u-email" href="mailto:your-email@example.com">your-email@example.com</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/DeltaDizzy"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">DeltaDizzy</span></a></li><li><a href="https://www.twitter.com/DeltaDizzy"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">DeltaDizzy</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>For all your Kopernicus Syntax Needs</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>